{"ast":null,"code":"import _classCallCheck from\"/Users/pcperini/Documents/Work/Lumos/real-estate-demo/real-estate-dashboard/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/pcperini/Documents/Work/Lumos/real-estate-demo/real-estate-dashboard/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/pcperini/Documents/Work/Lumos/real-estate-demo/real-estate-dashboard/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/pcperini/Documents/Work/Lumos/real-estate-demo/real-estate-dashboard/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import logo from\"./logo.svg\";import'./App.css';import{BrowserRouter as Router,Switch,Route,Link,Redirect}from'react-router-dom';import{withRouter}from'react-router-dom';import{connect}from'react-redux';import Login from'./containers/Login';import Listings from'./containers/Listings';import Listing from'./containers/Listing';import HeaderBar from'./components/HeaderBar';import{access as _access}from'./data/api/login';import queryString from'query-string';var App=/*#__PURE__*/function(_React$Component){_inherits(App,_React$Component);var _super=_createSuper(App);function App(){_classCallCheck(this,App);return _super.apply(this,arguments);}_createClass(App,[{key:\"componentDidMount\",value:function componentDidMount(){this.props.refreshSessionToken();}},{key:\"componentDidUpdate\",value:function componentDidUpdate(){this.props.refreshSessionToken();}},{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(\"div\",{className:\"App\"},/*#__PURE__*/React.createElement(Router,null,/*#__PURE__*/React.createElement(HeaderBar,null),/*#__PURE__*/React.createElement(AccessCapture,{sessionToken:this.props.sessionToken,access:this.props.access}),/*#__PURE__*/React.createElement(AuthRedirect,{sessionToken:this.props.sessionToken,pre:true}),/*#__PURE__*/React.createElement(Switch,null,/*#__PURE__*/React.createElement(Route,{path:\"/login\"},/*#__PURE__*/React.createElement(AuthRedirect,{sessionToken:this.props.sessionToken,pre:false}),/*#__PURE__*/React.createElement(Login,null)),/*#__PURE__*/React.createElement(Route,{path:\"/listings/:id\"},/*#__PURE__*/React.createElement(Listing,null)),/*#__PURE__*/React.createElement(Route,{path:\"/\"},/*#__PURE__*/React.createElement(Listings,null)))));}}]);return App;}(React.Component);var AuthRedirect=withRouter(function(props){var q=queryString.parse(props.location.search);if(q.c){return null;}else if(props.pre&&props.sessionToken===undefined){return/*#__PURE__*/React.createElement(Redirect,{to:\"/login\"});}else if(!props.pre&&props.sessionToken!==undefined){return/*#__PURE__*/React.createElement(Redirect,{to:\"/\"});}return null;});var AccessCapture=withRouter(function(props){if(props.sessionToken!==undefined){return null;}var q=queryString.parse(props.location.search);if(q.c){props.access(q.c);}return null;});export default connect(function(state){return{sessionToken:state.session.token};},function(dispatch){return{refreshSessionToken:function refreshSessionToken(){return dispatch({type:'session/refresh_token'});},access:function access(code){return _access(code,dispatch);}};})(App);","map":{"version":3,"sources":["/Users/pcperini/Documents/Work/Lumos/real-estate-demo/real-estate-dashboard/src/App.js"],"names":["React","BrowserRouter","Router","Switch","Route","Link","Redirect","withRouter","connect","Login","Listings","Listing","HeaderBar","access","queryString","App","props","refreshSessionToken","sessionToken","Component","AuthRedirect","q","parse","location","search","c","pre","undefined","AccessCapture","state","session","token","dispatch","type","code"],"mappings":"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","sourcesContent":["import React from 'react';\nimport logo from './logo.svg';\nimport './App.css';\nimport {\n  BrowserRouter as Router,\n  Switch,\n  Route,\n  Link,\n  Redirect\n} from 'react-router-dom';\nimport { withRouter } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport Login from './containers/Login';\nimport Listings from './containers/Listings';\nimport Listing from './containers/Listing';\nimport HeaderBar from './components/HeaderBar';\nimport { access } from './data/api/login';\nimport queryString from 'query-string';\n\nclass App extends React.Component {\n  componentDidMount() {\n    this.props.refreshSessionToken()\n  }\n\n  componentDidUpdate() {\n    this.props.refreshSessionToken()\n  }\n\n  render() {\n    return (\n      <div className=\"App\">\n        <Router>\n          <HeaderBar/>\n          <AccessCapture\n            sessionToken={this.props.sessionToken}\n            access={this.props.access}\n          />\n          <AuthRedirect sessionToken={this.props.sessionToken} pre={true}/>\n          <Switch>\n            <Route path=\"/login\">\n              <AuthRedirect sessionToken={this.props.sessionToken} pre={false}/>\n              <Login/>\n            </Route>\n            <Route path=\"/listings/:id\">\n              <Listing/>\n            </Route>\n            <Route path=\"/\">\n              <Listings/>\n            </Route>\n          </Switch>\n        </Router>\n      </div>\n    );\n  }\n}\n\nconst AuthRedirect = withRouter((props) => {\n  const q = queryString.parse(props.location.search);\n  if (q.c) {\n    return null\n  } else if (props.pre && props.sessionToken === undefined) {\n    return <Redirect to=\"/login\"/>;\n  } else if (!props.pre && props.sessionToken !== undefined) {\n    return <Redirect to=\"/\"/>;\n  }\n\n  return null;\n});\n\nconst AccessCapture = withRouter((props) => {\n  if (props.sessionToken !== undefined) { return null; }\n  const q = queryString.parse(props.location.search);\n  if (q.c) { props.access(q.c); }\n  return null;\n});\n\nexport default connect(\n  (state) => ({\n    sessionToken: state.session.token\n  }),\n  (dispatch) => ({\n    refreshSessionToken: () => dispatch({ type: 'session/refresh_token' }),\n    access: (code) => access(code, dispatch)\n  })\n)(App);\n"]},"metadata":{},"sourceType":"module"}